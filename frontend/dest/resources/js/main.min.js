var modules=window.modules=window.modules||{},methods={};modules["hex-form"]=function(){"use strict";var e,t,a,r;return e={},t={},a={viewport:"body",container:'.container[variant="custom-form"]',formContainer:'.container[variant="custom-form"]',formElement:'.container[variant="custom-form"] form',formFullForm:'.form[variant="full-form"]',formButton:".submit-button",dateFieldContainer:'.inputfield.container[variant="date"]',requiredFields:"input[data-required]",formPostedContainer:'.container[variant*="custom-form-posted"]',errorMessageContainer:'[variant*="error-message"]'},r={},t.htmlElement={getAttribute:function(e){return e.element.getAttribute(e.attributeKey)||!1},hasAttributeValue:function(e,a){return a||(a=t.htmlElement.getAttribute(e)),new RegExp(e.attributeValue,"gi").test(a)},addAttributeValue:function(e){var a=t.htmlElement.getAttribute(e);return t.htmlElement.hasAttributeValue(e,a)||(a=a?a+" "+e.attributeValue:e.attributeValue,e.element.setAttribute(e.attributeKey,a)),!0},removeAttributeValue:function(e){var a=t.htmlElement.getAttribute(e),r=!1;if(t.htmlElement.hasAttributeValue(e,a)){var n=new RegExp(e.attributeValue,"gi"),o=a.replace(n,"").trim();o?e.element.setAttribute(e.attributeKey,o):e.element.removeAttribute(e.attributeKey),r=!0}return r},toggleAttributeValue:function(e){e.attributeValue=e.removeAttributeValue;var a=!1;return t.htmlElement.removeAttributeValue(e)&&(e.attributeValue=e.addAttributeValue,t.htmlElement.addAttributeValue(e),a=!0),a},addStateValueInvalid:function(e){var a={element:e,attributeKey:"state",attributeValue:"invalid"};return t.htmlElement.addAttributeValue(a)},removeStateValueInvalid:function(e){var a={element:e,attributeKey:"state",attributeValue:"invalid"};return t.htmlElement.removeAttributeValue(a)}},t.fieldElement={focusOut:function(e){var a={name:e.currentTarget.name,values:e.currentTarget.value,valueCheck:e.currentTarget.dataset.valueCheck||e.currentTarget.type};t.formValidation.fieldValidation(a).hasError&&t.htmlElement.addStateValueInvalid(e.currentTarget),t.errorMessage.setState.hidden(e.currentTarget.form)},focusIn:function(e){t.htmlElement.removeStateValueInvalid(e.currentTarget)}},t.form={clickHandler:function(e){e.preventDefault(),t.dateSelector.isStateInvalid(e.currentTarget);var a=t.form.serialize(e.currentTarget),n=t.formValidation.formData(a.postData);n||r.containerVariantDateInvalid?t.form.errorHandler(n,e.currentTarget):n||r.containerVariantDateInvalid||t.form.postHandler(a,e.currentTarget.action)},postHandler:function(e,a){t.sendData.xhr("POST",a,e).then(function(e){var a=t.sendData.callback.success(e);t.form.callbackHandler(a)})},callbackHandler:function(a){if(a.errorData&&Object.keys(a.errorData).length>0){var r=e.body.querySelector('form[name="'+a.formName+'"]');t.form.errorHandler(a.errorData,r)}else a.succesData&&$(e.body).trigger(new jQuery.Event("navigate",{url:a.succesData.page,animation:"blurin",windowName:null,target:null}))},errorHandler:function(e,a){Object.keys(e).forEach(function(r){var n=e[r].data.elementType+'[name="'+e[r].data.name+'"]',o=a.querySelector(n);t.htmlElement.addStateValueInvalid(o)}),t.errorMessage.setState.active(a)},getValueOfElement:{input:function(e){var t;return!e.type||"radio"!==e.type&&"checkbox"!==e.type?e.type&&(t=e.value.trim()):e.checked&&(t=e.value.trim()),t},textarea:function(e){return e.value.trim()},select:function(e){var t;return e.type&&"select-one"===e.type?e.value&&(t=e.value):e.type&&"select-multiple"===e.type&&(t=[],e.value&&e.options&&Object.keys(e.options).forEach(function(a){e.options[a].selected&&t.push(e.options[a].value)})),t}},serialize:function(e){var a={formName:e.getAttribute("name")||null,action:e.getAttribute("action")||null,postData:{}};return a.postData=Array.prototype.slice.call(e.elements).reduce(function(e,a){return a&&a.name&&(e[a.name]?"number"==typeof e[a.name].valueKey&&isFinite(e[a.name].valueKey)&&Math.floor(e[a.name].valueKey)===e[a.name].valueKey&&e[a.name].valueKey++:e[a.name]={type:a.type,name:a.name,elementType:a.nodeName.toLowerCase(),required:"true"===a.dataset.required,valueCheck:a.dataset.valueCheck||a.type,valueKey:a.dataset.valueKey||0,values:[]},"function"==typeof t.form.getValueOfElement[a.nodeName.toLowerCase()]&&(t.form.getValueOfElement[a.nodeName.toLowerCase()](a)&&"select"===a.nodeName.toLowerCase()&&"select-multiple"===a.type?e[a.name].values=t.form.getValueOfElement[a.nodeName.toLowerCase()](a):t.form.getValueOfElement[a.nodeName.toLowerCase()](a)&&(a.dataset.valueKey?e[a.name].values[a.dataset.valueKey]=t.form.getValueOfElement[a.nodeName.toLowerCase()](a):e[a.name].values.push(t.form.getValueOfElement[a.nodeName.toLowerCase()](a))))),e},{}),a}},t.formValidation={formData:function(e){var a={};return Object.keys(e).forEach(function(r){if(!0===e[r].required){var n={name:e[r],values:e[r].values[0],valueCheck:e[r].valueCheck},o=t.formValidation.fieldValidation(n);o.hasError&&(a[r]={data:e[r],message:o.errorMessage})}}),Object.keys(a).length>0&&a},fieldValidation:function(e){var a={hasError:!1,errorMessage:null};return t.formValidation.validationType.isNotEmpty(e.values)?t.formValidation.validationType.isNotEmpty(e.values)&&"function"==typeof t.formValidation.validationType[e.valueCheck]&&(t.formValidation.validationType[e.valueCheck](e.values)||(a.hasError=!0,a.errorMessage=e.name+" field is not correct filled")):(a.hasError=!0,a.errorMessage=e.name+" field is empty"),a},validationType:{isNotEmpty:function(e){var t=!0;return void 0===e?t=!1:"object"==typeof e&&Object.keys(e).length>0||e.length>0?(t=!0,t=!0):t=!1,t},text:function(e){return!0},number:function(e){return/^\d+$/.test(e)},numberMax850:function(e){return/^\d+$/.test(e)&&e<851},alphabetic:function(e){return!/^\d+$/.test(e)},email:function(e){return/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e)},tel:function(e){return/^(?:\+\d{1,3}|0\d{1,3}|00\d{1,2})?(?:\s?\(\d+\))?(?:[-\/\s.]|\d)+$/.test(e)},dateFuture:function(e){e.day=parseInt(e.day,10),e.month=parseInt(e.month,10)-1,e.year=parseInt(e.year,10)+2e3;var t=new Date(e.year,e.month,e.day);return new Date<t&&t.getDate()===e.day&&t.getMonth()===e.month&&t.getFullYear()===e.year}}},t.sendData={xhr:function(e,t,a){return new Promise(function(r,n){var o=new XMLHttpRequest;o.open(e,t),o.setRequestHeader("Content-Type","application/json; charset=utf-8"),o.send(JSON.stringify(a)),o.onload=function(){200===o.status?r(o.response):n(o.statusText)},o.onerror=function(){n(o.statusText)}})},callback:{success:function(e){return JSON.parse(e)},error:function(e){}}},t.errorMessage={setState:{hidden:function(e){var r={element:e.querySelector(a.errorMessageContainer),attributeKey:"state",addAttributeValue:"hidden",removeAttributeValue:"active"};t.errorMessage.toggleState(r)},active:function(e){var r={element:e.querySelector(a.errorMessageContainer),attributeKey:"state",addAttributeValue:"active",removeAttributeValue:"hidden"};t.errorMessage.toggleState(r)}},getState:function(e){return e.querySelector(a.errorMessageContainer).getAttribute("state")},toggleState:function(e){t.htmlElement.toggleAttributeValue(e)}},t.dateSelector={fullChangeHandler:function(a){var r=t.dateSelector.convertFullToSeperated(e.dateSelectorFullDate.value);e.dateSelectorDay.value=r.day,e.dateSelectorMonth.value=r.month,e.dateSelectorYear.value=r.year.toString().slice(-2)},changeHandler:function(e){var a;t.dateSelector.testKeyUpEvent(e)?(t.dateSelector.testValues(),t.dateSelector.applyState(),"keyup"!==e.type&&"keydown"!==e.type||(a=e.currentTarget).value.length>=t.dateSelector.maxInputLength(a)&&16!==e.keyCode&&9!==e.keyCode&&8!==e.keyCode&&t.dateSelector.jumpToNextInput(a)):(e.preventDefault(),e.stopImmediatePropagation())},testValues:function(a){return r.age={day:e.dateSelectorDay.value,month:e.dateSelectorMonth.value,year:e.dateSelectorYear.value},r.age.day&&r.age.month&&r.age.year?t.formValidation.validationType.dateFuture(r.age)?r.ageState="valid":r.ageState="invalid":r.age.day||r.age.month||r.age.year?r.ageState="progress":r.ageState="initial","valid"===r.ageState},testFullDateSupport:function(){return"date"===e.dateSelectorFullDate.type},testKeyUpEvent:function(e){var t="keydown"===e.type,a=9===e.keyCode,r=13===e.keyCode,n=8===e.keyCode,o=46===e.keyCode,l=String.fromCharCode(e.keyCode).match(/[0-9]/),u=e.keyCode>=96&&e.keyCode<=105,i=229===e.keyCode;return!t||!(!t||!(a||r||l||n||o||u||i))},convertFullToSeperated:function(e){return e=new Date(e),{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}},checkInputLength:function(e){return e.value.length},maxInputLength:function(e){return e.getAttribute("maxlength")},nextInput:function(e){return e.getAttribute("data-nextfield")},jumpToNextInput:function(e){var a=t.dateSelector.nextInput(e);null!==a&&document.getElementById(a).focus()},dateInput:function(e){var a=e.current,r=e.keyCode;t.dateSelector.checkInputLength(a)==t.dateSelector.maxInputLength(a)&&16!==r&&9!==r&&t.dateSelector.jumpToNextInput(a)},applyState:function(a){a?e.dateSelectorContainer.setAttribute("state",a):(t.dateSelector.testValues(),e.dateSelectorContainer.setAttribute("state",r.ageState))},getContainer:function(e){return e.querySelectorAll(a.dateFieldContainer)||!1},isStateInvalid:function(e){var a=t.dateSelector.getContainer(e);return r.containerVariantDateInvalid=!1,a&&[].slice.call(a).forEach(function(e){"valid"!==e.getAttribute("state")&&(r.containerVariantDateInvalid=!0)}),r.containerVariantDateInvalid}},t.mount=function(t){t=t||document;var r=document.querySelector(a.container);return!!r&&(e.window=window,e.body=document.querySelector("body"),e.viewport=t||document.querySelector(a.viewport),e.formContainer=r,!0)},t.init=function(n){return!!e.formContainer&&(e.formElement=e.formContainer.querySelectorAll(a.formElement),e.requiredFields=e.formContainer.querySelectorAll(a.requiredFields),e.postedContainers=e.formContainer.querySelector(a.formPostedContainer),e.dateSelectorContainer=e.formContainer.querySelector('.inputfield.container[variant*="date"]'),e.dateSelectorContainer&&(e.dateSelectorDay=e.dateSelectorContainer.querySelector('.input[variant*="day"]'),e.dateSelectorMonth=e.dateSelectorContainer.querySelector('.input[variant*="month"]'),e.dateSelectorYear=e.dateSelectorContainer.querySelector('.input[variant*="year"]'),e.dateSelectorFullDate=e.dateSelectorContainer.querySelector('.input[variant*="full"]'),e.dateSelector=e.dateSelectorContainer.querySelectorAll('.input[variant*="dateSelector"]'),e.dateSelectorAllFields=e.dateSelectorContainer.querySelectorAll(".input"),r.fullDateSupport=t.dateSelector.testFullDateSupport(),r.isMobile=e.window.innerWidth<700,e.dateSelectorFullDate&&r.fullDateSupport&&r.isMobile&&(e.dateSelectorFullDate.setAttribute("state","active"),$(e.dateSelectorFullDate).on("change",t.dateSelector.fullChangeHandler))),Object.keys(e.formElement).forEach(function(a){e.formElement[a].addEventListener("submit",t.form.clickHandler)}),!0)},t.render=function(t){return!!e.formContainer},t.unmount=function(){e.formContainer&&($(e.formElement).off("submit",t.form.clickHandler),$(e.dateSelectorAllFields).on("click",t.dateSelector.setFocus),$(e.dateSelectorFullDate).on("change",t.dateSelector.fullChangeHandler))},{mount:t.mount,init:t.init,unmount:t.unmount,render:t.render,selector:a.container}}(),methods.modules={initAll:function(e){Object.keys(modules).forEach(function(t,a){try{if(modules[t].init)modules[t].init(e)}catch(e){}})},mountAll:function(e){Object.keys(modules).forEach(function(t,a){try{if(modules[t].mount)modules[t].mount(e)}catch(e){}})},unmountAll:function(){Object.keys(modules).forEach(function(e){try{modules[e].unmount()}catch(e){}})},renderAll:function(){Object.keys(modules).forEach(function(e){try{modules[e].render()}catch(e){}})}},methods.modules.mountAll("body"),methods.modules.initAll("body");